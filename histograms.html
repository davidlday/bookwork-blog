---
layout: page
title: Histograms
comments: false
jquery: false
metricsgraphics: true
---
        <script>

            all_metrics = {
                automated_readability_index: "Automated Readability Index",
                avg_syllables_per_word: "Avg. Syllables per Word",
                coleman_liau_index: "Coleman Liau Index",
                dialog_syllable_percentage: "Percent Dialogue (Syllables)",
                dialog_word_percentage: "Percent Dialogue (Words)",
                dialogue_syllable_count: "Dialogue Syllable Count",
                dialogue_unique_word_count: "Dialogue Unique Word Count",
                dialogue_word_count: "Dialogue Word Count",
                flesh_kincaid_grade_level: "Flesch Kincaid Grade Level",
                flesh_reading_ease: "Flesch Reading Ease",
                gunning_fog_index: "Gunning Fox Index",
                lix: "LIX",
                narrative_syllable_count: "Narrative Syllable Count",
                narrative_word_count: "Narrative Word Count",
                rix: "RIX",
                sentence_count: "Sentence Count",
                smog_index: "SMOG Index",
                syllable_count: "Syllable Count",
                unique_word_count: "Unique Word Count",
                word_count: "Word Count",
            };
            metrics = {
                coleman_liau_index: "Coleman Liau Index",
                smog_index: "SMOG Index",
                dialog_word_percentage: "Percent Dialogue (Words)",
            };
            magazines = {apex: "Apex Magazine"};


            $(document).ready(function() {

                $.getJSON( "/public/datafiles/bookworm_histograms.json", function( histdata ) {

                    container_width =  $( 'div.container' ).width()


                    // Make sure these are numbers
                    for (var magazine in magazines) {
                        for (var metric in metrics) {
                            histdata[magazines[magazine]][metric] = histdata[magazines[magazine]][metric].map(function(val){ return Number(val); })
                            $('#histogram_container').append('<div id="' + magazine + '-' + metric + '"></div>');

                            // Set bins
                            max = Math.max.apply(Math, histdata[magazines[magazine]][metric])
                            min = Math.min.apply(Math, histdata[magazines[magazine]][metric])
                            max_bin = Math.ceil(max)
                            min_bin = Math.floor(min)
                            total_bins = (max_bin - min_bin) * 3
                            target_div = '#' + magazine + '-' + metric

                            MG.data_graphic({
                                title: magazines[magazine] + ' - ' + metrics[metric],
                                data: histdata[magazines[magazine]][metric],
                                chart_type: 'histogram',
                                width: container_width,
                                height: 500,
                                right: 0,
                                target: target_div,
                                linked: true,
                                max_x: max_bin,
                                min_x: min_bin,
                                bins: total_bins,
                                y_extended_ticks: true,
                                mouseover: function(d, i) {
                                    $(target_div + 'm svg .mg-active-datapoint')
                                        .text('Value: ' + d3.round(d.x,2) +  '   Count: ' + d.y);
                                }
                            });
                        }
                    }
                });

            });
        </script>

        <div id="histogram_container"></div>